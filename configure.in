AC_INIT(configure.in)
AM_INIT_AUTOMAKE(vte,0.1)
AM_PROG_LIBTOOL
AC_EGREP_CPP(glibc,
		[
		 #include <stdio.h>
		 #ifdef __GLIBC__
		 glibc
		 #endif
		],
		AC_DEFINE(_GNU_SOURCE,1,[Use all features.]))
# AC_SYS_LARGEFILE
AC_PATH_XTRA
PKG_CHECK_MODULES(GLIB,[glib-2.0 gobject-2.0])
PKG_CHECK_MODULES(GTK, [glib-2.0 gobject-2.0 gdk-pixbuf-2.0 gtk+-2.0])
AC_DEFINE(G_DISABLE_DEPRECATED,1,[Disable deprecated glib features.])
AC_DEFINE(GDK_DISABLE_DEPRECATED,1,[Disable deprecated gdk features.])
AC_DEFINE(GDK_PIXBUF_DISABLE_DEPRECATED,1,[Disable deprecated gdk-pixbuf features.])
AC_DEFINE(GTK_DISABLE_DEPRECATED,1,[Disable deprecated gtk features.])
AC_DEFINE_UNQUOTED(PACKAGE,"$PACKAGE",[Package name.])
AC_CHECK_FUNCS(getpt grantpt unlockpt ptsname ptsname_r)

savelibs="$LIBS"
LIBS="$GTK_LIBS"
havexft=0
AC_CHECK_FUNC(XftDrawString32,havexft=1)
LIBS="$savelibs"
if test x$havexft = x1 ; then
	AC_CHECK_HEADER(X11/Xft/Xft.h,
			[AC_DEFINE(HAVE_XFT,
				   1,
				   [Whether not Xft is available.])])
fi
AM_MAINTAINER_MODE

if test x$USE_MAINTAINER_MODE != x ; then
	if test x$USE_MAINTAINER_MODE != xno ; then
		if test x$GCC != xno ; then
			CFLAGS="${CFLAGS} -Wunused"
			CFLAGS="${CFLAGS} -Wuninitialized"
			CFLAGS="${CFLAGS} -Wimplicit"
			CFLAGS="${CFLAGS} -Wstrict-prototypes"
			CFLAGS="${CFLAGS} -Wmissing-prototypes"
			CFLAGS="${CFLAGS} -Wmissing-declarations"
			CFLAGS="${CFLAGS} -Wcast-align"
		fi
		VTE_DEBUG=1
	fi
fi
if test x$VTE_DEBUG = x1 ; then
	AC_DEFINE(VTE_DEBUG,,[Enable debugging of unrecognized sequences.])
fi
AM_CONFIG_HEADER(config.h)
AC_OUTPUT([Makefile src/Makefile vte.pc])
